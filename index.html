<!doctype html>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.0.3/es5-shim.min.js"></script>
<script src="http://cdnjs.cloudflare.com/ajax/libs/mithril/0.2.0/mithril.min.js"></script>
<script type="text/javascript">

	var html = function(title, content){
		return m('html', [
			m('head', [m('title', title + ' - Mithril sample')]),
			m('body', [
				m('div', [
					m('h1', title),
					nav(title),
					content
				])
			])
		])
	}
	var nav = function(active){
		return m('ul', ["home", "login", "dashboard"].map(function(page){
			if (active == page) return  m("li", {classNames: "active"}, page)
			else return m("li", m("a[href='/" + page + "']", {config: m.route}, page))
		}));				
	}
	var home = {
		view: function(){
			return html('home', 'home');
		}
	};
	var login = {
		view: function(){
			return html('login', 'login');
		}
	};
	var dashboard = {
		view: function(){
			return html('dashboard', 'dashboard');
		}
	};
	var notfound = {
		view: function(){
			var message = m.route.param('page') + ' is not found.';
			return html(message, message);
		}
	};
	//m.route.mode = "pathname";
	m.route(document, "/", {
		"/": home,
		"/home": home,
		"/login": login,
		"/dashboard": dashboard,
		"/:page...": notfound
	});
</script>
